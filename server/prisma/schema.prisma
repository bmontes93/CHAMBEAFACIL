generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id          Int      @id @default(autoincrement())
  email       String   @unique
  password    String
  name        String
  role        String   @default("WORKER") // WORKER, COMPANY
  district    String?  // Huaraz, Independencia, etc.
  phone       String?
  
  // Worker Profile
  title       String?  // e.g. "Electricista Industrial"
  bio         String?
  skills      String? // JSON or comma separated
  verified    Boolean  @default(false)

  // Company Profile
  companyName String?
  logo        String?
  address     String?
  latitude    Float?
  longitude   Float?

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  jobs        Job[]
  applications Application[]
}

model Job {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  district    String   // Huaraz, Independencia...
  address     String?
  latitude    Float?
  longitude   Float?
  salary      Float    // In Soles
  type        String   @default("FULL_TIME") // FULL_TIME, PART_TIME, TEMPORAL
  status      String   @default("OPEN")
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  employerId  Int
  employer    User     @relation(fields: [employerId], references: [id])
  applications Application[]
}

model Application {
  id        Int      @id @default(autoincrement())
  userId    Int
  jobId     Int
  status    String   @default("PENDING") // PENDING, VIEWED, ACCEPTED, REJECTED
  message   String?
  createdAt DateTime @default(now())
  
  user      User     @relation(fields: [userId], references: [id])
  job       Job      @relation(fields: [jobId], references: [id])
}
